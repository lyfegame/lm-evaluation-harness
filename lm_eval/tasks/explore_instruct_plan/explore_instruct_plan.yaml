task: explore_instruct_plan
task_alias: explore_instruct_plan

# Use the custom task class that supports per-document system prompts
class: !function lm_eval.tasks.custom_system_prompt.task.SystemPromptTask

description: |
  Explore-Instruct Rewriting 32k Plan dataset with per-document system prompt support.
  This dataset contains instruction-following tasks with specific word count constraints.

tag:
  - instruction_following
  - generation
  - rewriting
  - planning

dataset_path: json
dataset_name: null
dataset_kwargs:
  data_files:
    train: /Users/nic/altera/mixplay-data-gen/processed_data/explore_instruct_plan/Explore_Instruct_Rewriting_32k_plan_train.jsonl
    validation: /Users/nic/altera/mixplay-data-gen/processed_data/explore_instruct_plan/Explore_Instruct_Rewriting_32k_plan_validation.jsonl
    test: /Users/nic/altera/mixplay-data-gen/processed_data/explore_instruct_plan/Explore_Instruct_Rewriting_32k_plan_test.jsonl

training_split: train
validation_split: validation
test_split: test
fewshot_split: train

# Prompt formatting
doc_to_text: "{{instruction}}"
doc_to_target: "{{response}}"

# Generation settings
output_type: generate_until
generation_kwargs:
  until: []
  max_gen_toks: 4096
  do_sample: true
  temperature: 1.0

# Metrics
metric_list:
  - metric: bleu

metadata:
  version: 0.0
